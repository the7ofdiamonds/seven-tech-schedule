import{R as _,u as Ne,c as we,j as e,a as Ie,b as J,r as t,_ as c,d as Pe,g as ke,f as Fe,e as He,h as Ae,i as Oe,k as K,t as Q,l as X,m as Le,n as Ue,o as Be,p as Y,q as Ge,s as Me}from"./index.js";function Z(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_,l=i===_?Ne:we(i);return function(){var o=l(),s=o.store;return s}}var Ve=Z();function $e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_,l=i===_?Ve:Z(i);return function(){var o=l();return o.dispatch}}var qe=$e();function We(){var i=window.location.protocol+"//"+window.location.host,l=function(){window.location.href="/login/?redirectTo=".concat(i,"/schedule/")},u=function(){window.location.href="/signup/?redirectTo=".concat(i,"/schedule/")},o=function(){window.location.href="/forgot/?redirectTo=".concat(i,"/schedule/")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"options",children:[e.jsx("button",{onClick:l,children:e.jsx("h3",{children:"LOGIN"})}),e.jsx("button",{onClick:u,children:e.jsx("h3",{children:"SIGN UP"})}),e.jsx("button",{onClick:o,children:e.jsx("h3",{children:"FORGOT"})})]})})}function Je(){var i=Ie();i.id;var l=J(function(n){return n.users}),u=l.user_email,o=l.user_id,s=J(function(n){return n.schedule}),ee=s.loading,g=s.scheduleError,x=s.events,b=s.start_date,D=s.start_time,N=s.event_id,te=s.event_date_time,m=s.summary;s.description,s.attendees;var j=s.office_hours,C=s.communication_preferences,ne=t.useState(""),w=c(ne,2),E=w[0],ae=w[1],se=t.useState(""),I=c(se,2),d=I[0],re=I[1],ce=t.useState(""),P=c(ce,2),f=P[0],ie=P[1],ue=t.useState(""),k=c(ue,2),y=k[0],F=k[1],oe=t.useState(""),H=c(oe,2),le=H[0],A=H[1],de=t.useState(""),O=c(de,2);O[0],O[1];var fe=t.useState(""),L=c(fe,2);L[0];var he=L[1],me=t.useState(""),U=c(me,2),ve=U[0],B=U[1],xe=t.useState([u]),G=c(xe,2),Se=G[0];G[1];var ge=t.useState(!1),M=c(ge,2);M[0],M[1];var pe=t.useState(""),V=c(pe,2);V[0],V[1];var _e=t.useState("info"),$=c(_e,2),q=$[0],W=$[1],je=t.useState("Choose a date"),z=c(je,2),R=z[0],p=z[1],h=t.useRef(null),T=t.useRef(null),Ce=t.useRef(null),S=t.useRef(null),v=t.useRef(null),Ee=t.useRef(null),a=qe();Pe(),t.useEffect(function(){a(ke())},[a]),t.useEffect(function(){j&&ae(Fe(j))},[j]),t.useEffect(function(){u&&a(He())},[u,a]),t.useEffect(function(){u||(W("info"),p("Login to schedule an appointment"))},[u]),t.useEffect(function(){o&&a(Ae())},[o,a]),t.useEffect(function(){g&&(W("error"),p(g))},[q,R]),t.useEffect(function(){x&&re(Oe(x))},[x]),t.useEffect(function(){h.current=document.getElementById("date_select"),T.current=document.getElementById("time_select"),Ce.current=document.getElementById("summary_select"),S.current=document.getElementById("description_select"),Ee.current=document.getElementById("description_select")},[]),t.useEffect(function(){d&&d.length>0&&(F(d[0]),a(K(d[0])))},[d]),t.useEffect(function(){if(y&&h.current){var n=h.current.value;ie(Q(x,n))}},[y]),t.useEffect(function(){f&&(A(f[0]),a(X(f[0])))},[f]);var ye=function(r){if(h.current)if(F(r.target.value),a(K(r.target.value)),p("Choose a time"),h.current.value!==void 0){var De=h.current.value;Q(x,De)}else console.error("selectedIndex is undefined")},Re=function(r){T.current&&(A(r.target.value),a(X(r.target.value)),p("Choose a topic"))};t.useEffect(function(){b&&D&&a(Le())},[b,D,a]),t.useEffect(function(){o&&a(Ue())},[o,a]),t.useEffect(function(){m&&S.current&&S.current.options.length>0&&(he(S.current.options[0].value),a(Be(S.current.options[0].value)))},[m,a]),t.useEffect(function(){m&&v.current&&v.current.options.length>0&&(B(v.current.options[0].value),a(Y(v.current.options[0].value)))},[m,a]);var Te=function(r){v.current&&(B(r.target.value),a(Y(r.target.value)))};t.useEffect(function(){m!==""&&u&&a(Ge(Se))},[m,a]);var be=function(){te&&a(Me())};return t.useEffect(function(){N&&(window.location.href="/dashboard")},[N]),g?e.jsx("div",{className:"status-bar card error",children:e.jsx("span",{children:g})}):ee?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"title",children:"schedule"}),E&&E.length>0?e.jsx("div",{className:"office-hours-card card",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"SUN"}),e.jsx("th",{children:"MON"}),e.jsx("th",{children:"TUE"}),e.jsx("th",{children:"WED"}),e.jsx("th",{children:"THU"}),e.jsx("th",{children:"FRI"}),e.jsx("th",{children:"SAT"})]})}),e.jsx("tbody",{children:e.jsx("tr",{children:E.map(function(n){return e.jsx(e.Fragment,{children:e.jsx("td",{children:e.jsx("h4",{children:n.start&&n.end?"".concat(n.start," - ").concat(n.end):"CLOSED"})},n.day)})})})})]})}):"",e.jsx("div",{className:"schedule",id:"schedule",children:e.jsxs("div",{className:"schedule-select",children:[d&&d.length>0?e.jsxs("div",{className:"date-select card",children:[e.jsx("label",{htmlFor:"date",children:"Choose a Date"}),e.jsx("select",{type:"text",name:"date",id:"date_select",ref:h,onChange:ye,defaultValue:y,min:new Date().toISOString().split("T")[0],children:d.map(function(n,r){return e.jsx("option",{value:n,children:n},r)})})]}):"",f&&f.length>0?e.jsxs("div",{className:"time-select card",children:[e.jsx("label",{htmlFor:"time",children:"Choose a Time"}),e.jsx("select",{type:"time",name:"time",id:"time_select",ref:T,defaultValue:le,onChange:Re,children:f.map(function(n,r){return e.jsx("option",{value:n,children:n},r)})})]}):""]})}),C&&C.length>0?e.jsxs("div",{className:"communication-select card",children:[e.jsx("label",{htmlFor:"summary",children:"Preferred Communication Type"}),e.jsx("select",{type:"text",name:"preferred_communication_type",id:"communication_select",ref:v,onChange:Te,defaultValue:ve,children:C.map(function(n,r){return e.jsx("option",{value:n.type,children:n.type},r)})})]}):"",R?e.jsx("div",{className:"status-bar card ".concat(q),children:e.jsx("span",{children:R})}):"",u?e.jsx("button",{onClick:be,children:e.jsx("h3",{children:"SCHEDULE"})}):e.jsx(We,{})]})}export{Je as default};
//# sourceMappingURL=Schedule.js.map
