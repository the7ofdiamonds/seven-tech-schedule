import{R as x,u as Ne,c as we,j as e,a as ke,b as K,r as t,_ as c,d as Pe,g as Ie,f as He,e as Ae,h as Fe,i as Le,k as Q,t as W,l as X,m as Oe,n as Be,o as Ue,p as Y,q as Ge,s as Ve}from"./index.js";function Z(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x,l=i===x?Ne:we(i);return function(){var o=l(),s=o.store;return s}}var Me=Z();function $e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x,l=i===x?Me:Z(i);return function(){var o=l();return o.dispatch}}var qe=$e();function ze(){var i=window.location.protocol+"//"+window.location.host,l=function(){window.location.href="/login/?redirectTo=".concat(i,"/schedule/")},u=function(){window.location.href="/signup/?redirectTo=".concat(i,"/schedule/")},o=function(){window.location.href="/forgot/?redirectTo=".concat(i,"/schedule/")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"options",children:[e.jsx("button",{onClick:l,children:e.jsx("h3",{children:"LOGIN"})}),e.jsx("button",{onClick:u,children:e.jsx("h3",{children:"SIGN UP"})}),e.jsx("button",{onClick:o,children:e.jsx("h3",{children:"FORGOT"})})]})})}function Ke(){var i=ke();i.id;var l=K(function(n){return n.users}),u=l.user_email,o=l.user_id,s=K(function(n){return n.schedule}),ee=s.loading,p=s.scheduleError,g=s.events,b=s.start_date,D=s.start_time,N=s.event_id,te=s.event_date_time,h=s.summary;s.description,s.attendees;var j=s.office_hours,C=s.communication_preferences,ne=t.useState(""),w=c(ne,2),E=w[0],ae=w[1],se=t.useState(""),k=c(se,2),d=k[0],re=k[1],ce=t.useState(""),P=c(ce,2),f=P[0],ie=P[1],ue=t.useState(""),I=c(ue,2),y=I[0],H=I[1],oe=t.useState(""),A=c(oe,2),le=A[0],F=A[1],de=t.useState(""),L=c(de,2);L[0],L[1];var fe=t.useState(""),O=c(fe,2);O[0];var me=O[1],he=t.useState(""),B=c(he,2),ve=B[0],U=B[1],ge=t.useState([u]),G=c(ge,2),Se=G[0];G[1];var pe=t.useState(!1),V=c(pe,2);V[0],V[1];var _e=t.useState(""),M=c(_e,2);M[0],M[1];var xe=t.useState("info"),$=c(xe,2),q=$[0],z=$[1],je=t.useState("Choose a date"),J=c(je,2),R=J[0],_=J[1],m=t.useRef(null),T=t.useRef(null),Ce=t.useRef(null),S=t.useRef(null),v=t.useRef(null),Ee=t.useRef(null),a=qe();Pe(),t.useEffect(function(){a(Ie())},[a]),t.useEffect(function(){j&&ae(He(j))},[j]),t.useEffect(function(){u&&a(Ae())},[u,a]),t.useEffect(function(){u||(z("info"),_("Login to schedule an appointment"))},[u]),t.useEffect(function(){o&&a(Fe())},[o,a]),t.useEffect(function(){p&&(z("error"),_(p))},[q,R]),t.useEffect(function(){g&&re(Le(g))},[g]),t.useEffect(function(){m.current=document.getElementById("date_select"),T.current=document.getElementById("time_select"),Ce.current=document.getElementById("summary_select"),S.current=document.getElementById("description_select"),Ee.current=document.getElementById("description_select")},[]),t.useEffect(function(){d&&d.length>0&&(H(d[0]),a(Q(d[0])))},[d]),t.useEffect(function(){if(y&&m.current){var n=m.current.value;ie(W(g,n))}},[y]),t.useEffect(function(){f&&(F(f[0]),a(X(f[0])))},[f]);var ye=function(r){if(m.current)if(H(r.target.value),a(Q(r.target.value)),_("Choose a time"),m.current.value!==void 0){var De=m.current.value;W(g,De)}else console.error("selectedIndex is undefined")},Re=function(r){T.current&&(F(r.target.value),a(X(r.target.value)),_("Choose a topic"))};t.useEffect(function(){b&&D&&a(Oe())},[b,D,a]),t.useEffect(function(){o&&a(Be())},[o,a]),t.useEffect(function(){h&&S.current&&S.current.options.length>0&&(me(S.current.options[0].value),a(Ue(S.current.options[0].value)))},[h,a]),t.useEffect(function(){h&&v.current&&v.current.options.length>0&&(U(v.current.options[0].value),a(Y(v.current.options[0].value)))},[h,a]);var Te=function(r){v.current&&(U(r.target.value),a(Y(r.target.value)))};t.useEffect(function(){h!==""&&u&&a(Ge(Se))},[h,a]);var be=function(){te&&a(Ve())};return t.useEffect(function(){N&&(window.location.href="/dashboard")},[N]),p?e.jsx("div",{className:"status-bar card error",children:e.jsx("span",{children:p})}):ee?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"title",children:"schedule"}),E&&E.length>0?e.jsx("div",{className:"office-hours-card card",children:E.map(function(n,r){return e.jsxs("span",{children:[e.jsx("h4",{className:"day",children:n.dayofweek}),e.jsx("h4",{children:n.start&&n.end?"".concat(n.start," - ").concat(n.end):"CLOSED"})]},r)})}):"",e.jsx("div",{className:"schedule",id:"schedule",children:e.jsxs("div",{className:"schedule-select",children:[d&&d.length>0?e.jsxs("div",{className:"date-select card",children:[e.jsx("label",{htmlFor:"date",children:"Choose a Date"}),e.jsx("select",{type:"text",name:"date",id:"date_select",ref:m,onChange:ye,defaultValue:y,min:new Date().toISOString().split("T")[0],children:d.map(function(n,r){return e.jsx("option",{value:n,children:n},r)})})]}):"",f&&f.length>0?e.jsxs("div",{className:"time-select card",children:[e.jsx("label",{htmlFor:"time",children:"Choose a Time"}),e.jsx("select",{type:"time",name:"time",id:"time_select",ref:T,defaultValue:le,onChange:Re,children:f.map(function(n,r){return e.jsx("option",{value:n,children:n},r)})})]}):""]})}),C&&C.length>0?e.jsxs("div",{className:"communication-select card",children:[e.jsx("label",{htmlFor:"summary",children:"Preferred Communication Type"}),e.jsx("select",{type:"text",name:"preferred_communication_type",id:"communication_select",ref:v,onChange:Te,defaultValue:ve,children:C.map(function(n,r){return e.jsx("option",{value:n.type,children:n.type},r)})})]}):"",R?e.jsx("div",{className:"status-bar card ".concat(q),children:e.jsx("span",{children:R})}):"",u?e.jsx("button",{onClick:be,children:e.jsx("h3",{children:"SCHEDULE"})}):e.jsx(ze,{})]})}export{Ke as default};
//# sourceMappingURL=Schedule.js.map
