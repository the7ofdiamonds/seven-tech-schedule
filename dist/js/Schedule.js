import{R as p,u as Ve,c as Me,a as Ue,b as ee,r as t,_ as i,d as $e,g as qe,f as ze,e as Ge,h as Je,i as Ke,j as te,t as ae,k as ne,l as Qe,m as We,n as Xe,o as se,p as N,q as e,s as Ye}from"./index.js";function re(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,m=d===p?Ve:Me(d);return function(){var u=m(),r=u.store;return r}}var Ze=re();function et(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,m=d===p?Ze:re(d);return function(){var u=m();return u.dispatch}}var tt=et();function st(){var d=Ue();d.id;var m=ee(function(a){return a.users}),c=m.user_email,u=m.user_id,r=ee(function(a){return a.schedule}),ie=r.loading,T=r.scheduleError,S=r.events,k=r.start_date,P=r.start_time,H=r.event_id,ce=r.event_date_time,h=r.summary;r.description;var j=r.attendees,C=r.office_hours,E=r.communication_preferences,ue=t.useState(""),I=i(ue,2),A=I[0],le=I[1],de=t.useState(""),w=i(de,2),l=w[0],oe=w[1],fe=t.useState(""),F=i(fe,2),o=F[0],me=F[1],he=t.useState(""),B=i(he,2),y=B[0],O=B[1],ve=t.useState(""),L=i(ve,2),Se=L[0],V=L[1],_e=t.useState(""),M=i(_e,2);M[0],M[1];var xe=t.useState(""),U=i(xe,2);U[0];var ge=U[1],pe=t.useState(""),$=i(pe,2),je=$[0],q=$[1],Ce=t.useState([c]),z=i(Ce,2),G=z[0],Ee=z[1],Ae=t.useState(!1),J=i(Ae,2),ye=J[0],Re=J[1],be=t.useState(""),K=i(be,2),R=K[0],Q=K[1],De=t.useState("info"),W=i(De,2),X=W[0],Y=W[1],Ne=t.useState("Choose a date"),Z=i(Ne,2),b=Z[0],x=Z[1],f=t.useRef(null),D=t.useRef(null),Te=t.useRef(null),_=t.useRef(null),v=t.useRef(null),ke=t.useRef(null),s=tt();$e(),t.useEffect(function(){s(qe())},[s]),t.useEffect(function(){C&&le(ze(C))},[C]),t.useEffect(function(){c&&s(Ge())},[c,s]),t.useEffect(function(){c||(Y("info"),x("Login to schedule an appointment"))},[c]),t.useEffect(function(){u&&s(Je())},[u,s]),t.useEffect(function(){T&&(Y("error"),x(T))},[X,b]),t.useEffect(function(){S&&oe(Ke(S))},[S]),t.useEffect(function(){f.current=document.getElementById("date_select"),D.current=document.getElementById("time_select"),Te.current=document.getElementById("summary_select"),_.current=document.getElementById("description_select"),ke.current=document.getElementById("description_select")},[]),t.useEffect(function(){l&&l.length>0&&(O(l[0]),s(te(l[0])))},[l]),t.useEffect(function(){if(y&&f.current){var a=f.current.value;me(ae(S,a))}},[y]),t.useEffect(function(){o&&(V(o[0]),s(ne(o[0])))},[o]);var Pe=function(n){if(f.current)if(O(n.target.value),s(te(n.target.value)),x("Choose a time"),f.current.value!==void 0){var g=f.current.value;ae(S,g)}else console.error("selectedIndex is undefined")},He=function(n){D.current&&(V(n.target.value),s(ne(n.target.value)),x("Choose a topic"))};t.useEffect(function(){k&&P&&s(Qe())},[k,P,s]),t.useEffect(function(){u&&s(We())},[u,s]),t.useEffect(function(){h&&_.current&&_.current.options.length>0&&(ge(_.current.options[0].value),s(Xe(_.current.options[0].value)))},[h,s]),t.useEffect(function(){h&&v.current&&v.current.options.length>0&&(q(v.current.options[0].value),s(se(v.current.options[0].value)))},[h,s]);var Ie=function(n){v.current&&(q(n.target.value),s(se(n.target.value)))};t.useEffect(function(){h!==""&&c&&s(N(G))},[h,s]);var we=function(){if(R){var n=[c,R];Q(""),s(N(n))}},Fe=function(){Re(function(n){return!n})},Be=function(n){var g=G.filter(function(at,Le){return Le!==n});Ee(g),s(N(g))},Oe=function(){ce&&s(Ye())};return t.useEffect(function(){H&&(window.location.href="/dashboard")},[H]),ie?e.jsx("div",{children:"Loading..."}):e.jsx(e.Fragment,{children:e.jsxs("main",{children:[e.jsx("h2",{className:"title",children:"schedule"}),A&&A.length>0?e.jsx("div",{className:"office-hours-card card",children:A.map(function(a,n){return e.jsxs("span",{children:[e.jsx("h4",{className:"day",children:a.dayofweek}),e.jsx("h4",{children:a.start&&a.end?"".concat(a.start," - ").concat(a.end):"CLOSED"})]},n)})}):"",c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"schedule-select",children:[l&&l.length>0?e.jsxs("div",{className:"date-select card",children:[e.jsx("label",{htmlFor:"date",children:"Choose a Date"}),e.jsx("select",{type:"text",name:"date",id:"date_select",ref:f,onChange:Pe,defaultValue:y,min:new Date().toISOString().split("T")[0],children:l.map(function(a,n){return e.jsx("option",{value:a,children:a},n)})})]}):"",o&&o.length>0?e.jsxs("div",{className:"time-select card",children:[e.jsx("label",{htmlFor:"time",children:"Choose a Time"}),e.jsx("select",{type:"time",name:"time",id:"time_select",ref:D,defaultValue:Se,onChange:He,children:o.map(function(a,n){return e.jsx("option",{value:a,children:a},n)})})]}):""]}),E&&E.length>0?e.jsxs("div",{className:"communication-select card",children:[e.jsx("label",{htmlFor:"summary",children:"Preferred Communication Type"}),e.jsx("select",{type:"text",name:"preferred_communication_type",id:"communication_select",ref:v,onChange:Ie,defaultValue:je,children:E.map(function(a,n){return e.jsx("option",{value:a.type,children:a.type},n)})})]}):"",j&&j.length>0?e.jsxs("div",{className:"attendees-select card",children:[e.jsx("label",{htmlFor:"attendees",children:"Attendees"}),j.map(function(a,n){return e.jsxs("div",{className:"attendee",children:[e.jsx("h4",{children:a},n),e.jsx("button",{className:"remove-attendee",onClick:Be,children:e.jsx("h4",{children:"-"})}),e.jsx("button",{onClick:Fe,children:e.jsx("h4",{children:"+"})})]})})]}):"",e.jsxs("div",{className:"additional-attendee card ".concat(ye?"view":""),id:"additional_attendee",children:[e.jsx("label",{htmlFor:"attendees",children:"Additional Attendee"}),e.jsxs("div",{className:"attendee",children:[e.jsx("input",{type:"email",value:R,onChange:function(n){return Q(n.target.value)}}),e.jsx("button",{className:"add-attendee",onClick:we,children:e.jsx("h4",{children:"+"})})]})]}),e.jsx("button",{onClick:Oe,children:e.jsx("h3",{children:"SCHEDULE"})})]}),b?e.jsx("div",{className:"status-bar card ".concat(X),children:e.jsx("span",{children:b})}):""]})})}export{st as default};
//# sourceMappingURL=Schedule.js.map
